{"version":3,"sources":["webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?2a9c","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?613b","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?6279","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?95f0","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?e84d","webpack:///D:/workspace/wechat/bookchat-by-uniapp/pages/index/index.vue?03e3"],"names":["data","indicatorDots","autoplay","interval","duration","bannerWidth","bannerHeight","banners","categoryBooks","recommendBooks","onLoad","info","uni","getSystemInfoSync","width","windowWidth","pixelRatio","height","config","bannerRatio","debug","console","log","loadData","methods","that","cids","categories","api","getCategories","then","res","length","filter","category","b","pid","cnt","push","id","catch","e","finally","bookLists","Promise","all","util","request","page","size","sort","bookListsByCids","join","resBanners","resRecommendBooks","resBookLists","books","map","book","undefined","showSearch","hideLoading"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0aa9f2f2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0aa9f2f2', component.options)\n    } else {\n      api.reload('0aa9f2f2', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=0aa9f2f2&\", function () {\n      api.rerender('0aa9f2f2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"workspace/wechat/bookchat-by-uniapp/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=0aa9f2f2&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../../utils/api.js'\nimport util from '../../utils/util.js'\nimport config from '../../config.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tindicatorDots: true,\n\t\t\tautoplay: true,\n\t\t\tinterval: 3000,\n\t\t\tduration: 500,\n\t\t\tbannerWidth: '100%',\n\t\t\tbannerHeight: 'auto',\n\t\t\tbanners: [],\n\t\t\tcategoryBooks: [],\n\t\t\trecommendBooks: []\n\t\t}\n\t},\n\tonLoad() {\n\t\tlet info = uni.getSystemInfoSync()\n\t\tlet width = info.windowWidth * info.pixelRatio - 60; // 转成 rpx，因为小程序边距设置为 30rpx\n\t\tlet height = width / config.bannerRatio\n\t\tthis.bannerWidth =  width / info.pixelRatio + \"px\",\n\t\tthis.bannerHeight = height / info.pixelRatio + \"px\"\n\t\tif(config.debug) console.log(this.bannerWidth, this.bannerHeight)\n\t\tthis.loadData()\n\t},\n\tmethods: {\n\t\tloadData() {\n\t\t    let that = this\n\t\t    let cids = []\n\t\t    let categories = []\n\t\t    api.getCategories().then(function(res) {\n\t\t      if (res.length > 0) {\n\t\t        categories = res.filter(function(category) {\n\t\t          let b = category.pid == 0 && category.cnt > 0\n\t\t          if (b) cids.push(category.id)\n\t\t          return b\n\t\t        })\n\t\t      }\n\t\t      if (config.debug) console.log(res, categories, cids)\n\t\t    }).catch(function(e) {\n\t\t      console.log(\"api.getCategories()\", e)\n\t\t    }).finally(function() {\n\t\t      let banners = []\n\t\t      let recommendBooks = []\n\t\t      let bookLists = []\n\t\t      Promise.all([util.request(config.api.banners), util.request(config.api.bookLists, {\n\t\t        page: 1,\n\t\t        size: 12,\n\t\t        sort: 'latest-recommend'\n\t\t      }), util.request(config.api.bookListsByCids, {\n\t\t        page: 1,\n\t\t        size: 5,\n\t\t        sort: 'new',\n\t\t        cids: cids.join(',')\n\t\t      })]).then(function([resBanners, resRecommendBooks, resBookLists]) {\n\t\t        if (config.debug) console.log(cids, resBanners, resRecommendBooks, resBookLists)\n\t\t        if (resBanners.data && resBanners.data.banners) banners = resBanners.data.banners\n\t\t        if (resRecommendBooks.data && resRecommendBooks.data.books) recommendBooks = resRecommendBooks.data.books\n\t\t        if (resBookLists.data && resBookLists.data.books) {\n\t\t          categories = categories.map(function(category) {\n\t\t            let book = resBookLists.data.books[category.id]\n\t\t            if (book != undefined && book.length > 0) {\n\t\t              category.books = book\n\t\t            } else {\n\t\t              category.books = []\n\t\t            }\n\t\t            return category\n\t\t          })\n\t\t        }\n\t\t      }).catch(function(e) {\n\t\t        console.log(e)\n\t\t      }).finally(function() {\n\t\t        that.banners = banners\n\t\t\t\tthat.categoryBooks = categories\n\t\t\t\tthat.recommendBooks = recommendBooks\n\t\t\t\tthat.showSearch= true\n\t\t        uni.hideLoading()\n\t\t      })\n\t\t    })\n\t\t  },\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}